---
import { getCollection } from 'astro:content';
import PartPost from '../../layouts/PartPost.astro';
import { slugify } from '../../utils/slugify';

export async function getStaticPaths() {
  const partsCollection = await getCollection('parts');
  return partsCollection.map(entry => ({
    params: {
      slug: `${slugify(entry.data.title)}-${entry.data.partNumber}`
    },
    props: { entry },
  }));
}

const { entry } = Astro.props;
---
<PartPost entry={entry}>
  <slot />
</PartPost>